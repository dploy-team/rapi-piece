<div class="dialog-content-wrapper dialog-form-city p-0">
  <mat-toolbar matDialogTitle class="mat-primary m-0">
    <div fxFlex fxLayout="row" fxLayoutAlign="space-between center">
      <span class="tc-white">{{
        "RAPI.PIECE.CITY.FORM.NEW_CITY" | translate
      }}</span>
      <button
        mat-button
        class="mat-icon-button"
        (click)="dialogRef.close()"
        aria-label="Close dialog"
      >
        <mat-icon class="tc-white">close</mat-icon>
      </button>
    </div>
  </mat-toolbar>

  <div mat-dialog-content class="p-24 m-0" fusePerfectScrollbar>
    <form class="p-24" [formGroup]="citysForm">
      <div fxLayout="row" fxLayoutAlign="none center">
        <mat-form-field fxFlex class="search-city-input">
          <input
            matInput
            placeholder="{{'RAPI.PIECE.CITY.FORM.SEARCH' | translate}}"
            formControlName="cityInput"
          />
        </mat-form-field>

        <button
          (click)="buscar()"
          mat-raised-button=""
          color="primary"
          class="ml-16"
        >
        {{'RAPI.PIECE.CITY.FORM.SEARCH_BUTTON' | translate}}
        </button>
      </div>
    </form>
    <mat-list>
      <div>
        <mat-spinner
          *ngIf="isLoading === true"
          color="accent"
          diameter="60"
        ></mat-spinner>
      </div>
      <div *ngIf="isLoading === false && cities.length > 0">
        <h3 mat-subheader>{{'RAPI.PIECE.CITY.FORM.FOUNDED_CITIES' | translate}}</h3>
        <mat-list-item *ngFor="let city of cities">
          <h4 mat-line>{{ city.description }}</h4>
          <button (click)="saveCity(city)" mat-raised-button="" color="primary">
            {{'RAPI.PIECE.CITY.FORM.SELECT' | translate}}
          </button>
        </mat-list-item>
      </div>
      <mat-list-item
        *ngIf="cities.length == 0 && isBusqued == true && isLoading === false"
      >
        <h4 mat-line>{{'RAPI.PIECE.CITY.FORM.NOT_FOUND' | translate}}</h4>
      </mat-list-item>
    </mat-list>
  </div>

  <div
    mat-dialog-actions
    class="m-16 p-16"
    fxLayout="row"
    fxLayoutAlign="end center"
  >
    <button
      mat-button
      color="warn"
      (click)="dialogRef.close()"
      aria-label="Delete"
      class="mr-8"
      matTooltip="Delete"
    >
      <mat-icon color="warn">close</mat-icon>
      {{'COMMONS.FORM.LABELS.CANCEL' | translate}}
    </button>
    <button mat-flat-button color="accent" (click)="save()" aria-label="SAVE">
      <mat-icon>send</mat-icon>
      {{'COMMONS.FORM.LABELS.SAVE' | translate}}
    </button>
  </div>
</div>
